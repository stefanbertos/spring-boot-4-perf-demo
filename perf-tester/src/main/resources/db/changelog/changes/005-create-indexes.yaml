databaseChangeLog:
  - changeSet:
      id: 005-create-indexes
      author: perf-tester
      comment: Create indexes for performance optimization
      changes:
        - createIndex:
            tableName: PERF_TEST_RUN
            indexName: IDX_TEST_RUN_TEST_ID
            columns:
              - column:
                  name: TEST_ID
        - createIndex:
            tableName: PERF_TEST_RUN
            indexName: IDX_TEST_RUN_STATUS
            columns:
              - column:
                  name: STATUS
        - createIndex:
            tableName: PERF_TEST_RUN
            indexName: IDX_TEST_RUN_START_TIME
            columns:
              - column:
                  name: START_TIME
                  descending: true
        - createIndex:
            tableName: PERF_MESSAGE
            indexName: IDX_MESSAGE_TEST_RUN_ID
            columns:
              - column:
                  name: TEST_RUN_ID
        - createIndex:
            tableName: PERF_MESSAGE
            indexName: IDX_MESSAGE_MESSAGE_ID
            columns:
              - column:
                  name: MESSAGE_ID
        - createIndex:
            tableName: PERF_MESSAGE
            indexName: IDX_MESSAGE_STATUS
            columns:
              - column:
                  name: STATUS
        - createIndex:
            tableName: PERF_MESSAGE
            indexName: IDX_MESSAGE_TRACE_ID
            columns:
              - column:
                  name: TRACE_ID
        - createIndex:
            tableName: PERF_METRIC
            indexName: IDX_METRIC_TEST_RUN_ID
            columns:
              - column:
                  name: TEST_RUN_ID
        - createIndex:
            tableName: PERF_METRIC
            indexName: IDX_METRIC_NAME_TIME
            columns:
              - column:
                  name: METRIC_NAME
              - column:
                  name: COLLECTED_AT
                  descending: true
      rollback:
        - dropIndex:
            tableName: PERF_METRIC
            indexName: IDX_METRIC_NAME_TIME
        - dropIndex:
            tableName: PERF_METRIC
            indexName: IDX_METRIC_TEST_RUN_ID
        - dropIndex:
            tableName: PERF_MESSAGE
            indexName: IDX_MESSAGE_TRACE_ID
        - dropIndex:
            tableName: PERF_MESSAGE
            indexName: IDX_MESSAGE_STATUS
        - dropIndex:
            tableName: PERF_MESSAGE
            indexName: IDX_MESSAGE_MESSAGE_ID
        - dropIndex:
            tableName: PERF_MESSAGE
            indexName: IDX_MESSAGE_TEST_RUN_ID
        - dropIndex:
            tableName: PERF_TEST_RUN
            indexName: IDX_TEST_RUN_START_TIME
        - dropIndex:
            tableName: PERF_TEST_RUN
            indexName: IDX_TEST_RUN_STATUS
        - dropIndex:
            tableName: PERF_TEST_RUN
            indexName: IDX_TEST_RUN_TEST_ID

databaseChangeLog:
  - changeSet:
      id: 002-create-perf-test-run
      author: perf-tester
      comment: Create PERF_TEST_RUN table to store test execution details
      changes:
        - createSequence:
            sequenceName: PERF_TEST_RUN_SEQ
            startValue: 1
            incrementBy: 1
        - createTable:
            tableName: PERF_TEST_RUN
            columns:
              - column:
                  name: ID
                  type: NUMBER(19)
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: TEST_ID
                  type: VARCHAR2(100)
                  remarks: Unique identifier for the test run
              - column:
                  name: STATUS
                  type: VARCHAR2(20)
                  constraints:
                    nullable: false
                  remarks: "Test status: RUNNING, COMPLETED, FAILED, TIMEOUT"
              - column:
                  name: MESSAGE_COUNT
                  type: NUMBER(10)
                  constraints:
                    nullable: false
                  remarks: Total number of messages to be sent
              - column:
                  name: COMPLETED_COUNT
                  type: NUMBER(10)
                  defaultValueNumeric: 0
                  remarks: Number of messages completed round-trip
              - column:
                  name: FAILED_COUNT
                  type: NUMBER(10)
                  defaultValueNumeric: 0
                  remarks: Number of messages that failed
              - column:
                  name: START_TIME
                  type: TIMESTAMP
                  constraints:
                    nullable: false
                  remarks: Test start timestamp
              - column:
                  name: END_TIME
                  type: TIMESTAMP
                  remarks: Test end timestamp
              - column:
                  name: DURATION_MS
                  type: NUMBER(19)
                  remarks: Total test duration in milliseconds
              - column:
                  name: TPS
                  type: NUMBER(10, 2)
                  remarks: Transactions per second
              - column:
                  name: AVG_LATENCY_MS
                  type: NUMBER(10, 2)
                  remarks: Average message latency in milliseconds
              - column:
                  name: MIN_LATENCY_MS
                  type: NUMBER(10, 2)
                  remarks: Minimum message latency in milliseconds
              - column:
                  name: MAX_LATENCY_MS
                  type: NUMBER(10, 2)
                  remarks: Maximum message latency in milliseconds
              - column:
                  name: P50_LATENCY_MS
                  type: NUMBER(10, 2)
                  remarks: 50th percentile latency
              - column:
                  name: P95_LATENCY_MS
                  type: NUMBER(10, 2)
                  remarks: 95th percentile latency
              - column:
                  name: P99_LATENCY_MS
                  type: NUMBER(10, 2)
                  remarks: 99th percentile latency
              - column:
                  name: CREATED_AT
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP
                  constraints:
                    nullable: false
              - column:
                  name: UPDATED_AT
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP
      rollback:
        - dropTable:
            tableName: PERF_TEST_RUN
        - dropSequence:
            sequenceName: PERF_TEST_RUN_SEQ
